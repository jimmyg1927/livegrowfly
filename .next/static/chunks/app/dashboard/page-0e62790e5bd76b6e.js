(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1950:(e,t,s)=>{"use strict";s.d(t,{J:()=>a});let a="https://glowfly-api-production.up.railway.app"},5748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),r=s(2115),n=s(5695),o=s(6874),i=s.n(o);function l(e){let{used:t,limit:s}=e,r=Math.min(t/s*100,100),n=t>=s;return(0,a.jsxs)("div",{className:"w-full max-w-xs bg-muted p-4 rounded-2xl shadow-sm flex flex-col gap-2 border border-border",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-xs font-medium text-foreground/80",children:[(0,a.jsx)("span",{children:"Prompts Used"}),(0,a.jsxs)("span",{className:"text-foreground",children:[t," / ",s]})]}),(0,a.jsx)("div",{className:"w-full h-2 rounded-full bg-border overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(n?"bg-red-500":"bg-primary"," transition-all duration-500 ease-in-out"),style:{width:"".concat(r,"%")}})})]})}var c=s(6766);function d(e){let{status:t="idle",size:s=200}=e,r=Math.round(1.2*s);return(0,a.jsx)("div",{style:{width:s,height:r},className:"relative",children:(0,a.jsx)(c.default,{src:"/growfly-bot.png",alt:"Growfly Bot",width:s,height:r,className:"object-contain transition-transform ".concat("thinking"===t?"animate-bounce":"")})})}var x=s(238),h=s(9772),u=s(4229),m=s(6516),p=s(1950);let f=["Give me 3 new ideas today on how to get new business.","Outline a week-long social media calendar for my brand.","Write an email sequence to nurture leads.","Recommend the best marketing channels for a B2B SaaS."];function b(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[b,g]=(0,r.useState)("Hello, I'm Growfly — I’m here to help. How can I assist you today?"),[y,w]=(0,r.useState)(f),[j,v]=(0,r.useState)(!1),N=localStorage.getItem("growfly_jwt");(0,r.useEffect)(()=>{if(!N)return void e.push("/login");fetch("".concat(p.J,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(N)}}).then(e=>{if(!e.ok)throw Error("Not authenticated");return e.json()}).then(e=>s(e)).catch(()=>{localStorage.removeItem("growfly_jwt"),e.push("/login")})},[N,e]),(0,r.useEffect)(()=>{t&&(!t.subscriptionType||"none"===t.subscriptionType)&&e.push("/plans")},[t,e]);let S=async e=>{if(e.trim()){v(!0);try{let t=await fetch("".concat(p.J,"/api/ai"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)},body:JSON.stringify({message:e})});if(!t.ok)throw Error("Server error");let s=await t.json();g(s.response),w(s.followUps||[])}catch(e){g("❌ ".concat(e.message)),w([])}finally{v(!1),c("")}}},k=async()=>{await fetch("".concat(p.J,"/api/saved"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)},body:JSON.stringify({content:b})})},C=async()=>{await fetch("".concat(p.J,"/api/collab"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)},body:JSON.stringify({content:b})}),e.push("/collab-zone")};return t?(0,a.jsxs)("div",{className:"space-y-6 px-4 md:px-8 lg:px-12 pb-10",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,a.jsxs)("h1",{className:"text-xl font-semibold text-foreground",children:["Welcome, ",t.name||t.email]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(l,{used:t.promptsUsed,limit:t.promptLimit}),(0,a.jsxs)(i(),{href:"/refer",className:"flex items-center gap-2 bg-muted border border-border px-4 py-3 rounded-xl shadow-sm hover:bg-muted/70 transition",children:[(0,a.jsx)(x.A,{size:18,className:"text-accent"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Refer a Friend"})]}),(0,a.jsx)(i(),{href:"/settings",children:(0,a.jsx)(h.A,{className:"text-foreground hover:text-accent transition w-7 h-7"})})]})]}),(0,a.jsxs)("div",{className:"bg-card rounded-2xl p-4 space-y-4 shadow-sm border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d,{size:24}),(0,a.jsx)("h2",{className:"text-base font-medium text-foreground",children:"Your AI Sidekick"})]}),(0,a.jsx)("div",{className:"bg-muted text-foreground p-4 rounded-xl shadow text-sm leading-relaxed whitespace-pre-wrap border border-border animate-fade-in",children:b}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:k,className:"flex items-center gap-1 text-xs px-3 py-1 rounded-full bg-primary text-white hover:bg-primary/80 transition",children:[(0,a.jsx)(u.A,{size:14})," Save"]}),(0,a.jsxs)("button",{onClick:C,className:"flex items-center gap-1 text-xs px-3 py-1 rounded-full bg-secondary text-foreground hover:bg-secondary/80 transition",children:[(0,a.jsx)(m.A,{size:14})," Share to Collab Zone"]})]}),y.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.map((e,t)=>(0,a.jsx)("button",{onClick:()=>S(e),className:"text-xs bg-primary text-white px-3 py-1 rounded-full hover:bg-primary/80 transition-colors",children:e},t))}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"What would you like help with today?",className:"flex-1 border border-border rounded px-4 py-2 bg-background text-textPrimary text-sm focus:outline-accent",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S(o))},disabled:j}),(0,a.jsx)("button",{onClick:()=>S(o),disabled:j,className:"bg-accent text-background px-6 py-2 text-sm rounded hover:bg-accent/90 transition",children:j?"…":"Send"})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-screen text-textSecondary",children:"Loading…"})}},8416:(e,t,s)=>{Promise.resolve().then(s.bind(s,5748))}},e=>{var t=t=>e(e.s=t);e.O(0,[822,771,441,684,358],()=>t(8416)),_N_E=e.O()}]);