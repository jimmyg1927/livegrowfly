(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{441:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var s=a(7907),n=a(9107),r=a(4377),o=a(3380),l=a.n(o);function i(e){let{used:t,limit:a}=e,n=Math.min(t/a*100,100),r=t>=a;return(0,s.jsxs)("div",{className:"w-full max-w-xs bg-muted p-4 rounded-2xl shadow-sm flex flex-col gap-2 border border-border",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs font-medium text-foreground/80",children:[(0,s.jsx)("span",{children:"Prompts Used"}),(0,s.jsxs)("span",{className:"text-foreground",children:[t," / ",a]})]}),(0,s.jsx)("div",{className:"w-full h-2 rounded-full bg-border overflow-hidden",children:(0,s.jsx)("div",{className:"h-full ".concat(r?"bg-red-500":"bg-primary"," transition-all duration-500 ease-in-out"),style:{width:"".concat(n,"%")}})})]})}var d=a(4748);function c(e){let{status:t="idle",size:a=200}=e,n=Math.round(1.2*a);return(0,s.jsx)("div",{style:{width:a,height:n},className:"relative",children:(0,s.jsx)(d.default,{src:"/growfly-bot.png",alt:"Growfly Bot",width:a,height:n,className:"object-contain transition-transform ".concat("thinking"===t?"animate-bounce":"")})})}var u=a(4967),m=a(411),f=a(9206),p=a(4278);function x(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,p.QP)((0,f.$)(t))}let h=u.bL;u.l9;let b=u.ZL;u.bm;let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(u.hJ,{ref:t,className:x("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});g.displayName=u.hJ.displayName;let y=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(b,{children:[(0,s.jsx)(g,{}),(0,s.jsxs)(u.UC,{ref:t,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[n,(0,s.jsxs)(u.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});y.displayName=u.UC.displayName;let v=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};v.displayName="DialogHeader";let w=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(u.hE,{ref:t,className:x("text-lg font-semibold leading-none tracking-tight",a),...n})});w.displayName=u.hE.displayName;let j=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(u.VY,{ref:t,className:x("text-sm text-muted-foreground",a),...n})});j.displayName=u.VY.displayName;let N=n.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:x("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});N.displayName="Input";var k=a(5232);let S=(0,a(248).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),z=n.forwardRef((e,t)=>{let{className:a,variant:n,size:r,asChild:o=!1,...l}=e,i=o?k.DX:"button";return(0,s.jsx)(i,{className:x(S({variant:n,size:r,className:a})),ref:t,...l})});function C(e){let{open:t,onClose:a,onConfirm:r}=e,[o,l]=(0,n.useState)("");return(0,n.useEffect)(()=>{t||l("")},[t]),(0,s.jsx)(h,{open:t,onOpenChange:a,children:(0,s.jsxs)(y,{className:"bg-background border border-border text-textPrimary",children:[(0,s.jsxs)(v,{children:[(0,s.jsx)(w,{children:"Name this response"}),(0,s.jsx)(j,{children:"Enter a name so you can find this saved response later."})]}),(0,s.jsx)(N,{value:o,onChange:e=>l(e.target.value),placeholder:"e.g. Instagram Growth Plan"}),(0,s.jsx)(z,{onClick:()=>{o.trim()&&r(o.trim())},className:"w-full",children:"Save"})]})})}z.displayName="Button";var E=a(1599),A=a(807),D=a(8600),T=a(8359),J=a(2142),O=a(9514);function _(){let e=(0,r.useRouter)(),[t,a]=(0,n.useState)(null),[o,d]=(0,n.useState)(""),[u,m]=(0,n.useState)([{role:"assistant",content:"Hello, I'm Growfly — I’m here to help. How can I assist you today?"}]),[f,p]=(0,n.useState)([]),[x,h]=(0,n.useState)(!1),[b,g]=(0,n.useState)(0),[y,v]=(0,n.useState)(!1),w=(0,n.useRef)(null),j=localStorage.getItem("growfly_jwt"),N=()=>{let e=new Date;return new Date(e.getFullYear(),e.getMonth()+1,1).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})};(0,n.useEffect)(()=>{if(!j)return void e.push("/login");fetch("".concat(O.J,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(j)},credentials:"include"}).then(e=>{if(!e.ok)throw Error("Not authenticated");return e.json()}).then(e=>{a(e),g(e.promptsUsed)}).catch(()=>{localStorage.removeItem("growfly_jwt"),e.push("/login")})},[j,e]),(0,n.useEffect)(()=>{t&&(!t.subscriptionType||"none"===t.subscriptionType)&&e.push("/plans")},[t,e]),(0,n.useEffect)(()=>{w.current&&w.current.scrollTo({top:w.current.scrollHeight,behavior:"smooth"})},[u]);let k=async e=>{let a=e.trim();if(a&&t){if(b>=t.promptLimit){let e=N();m(t=>[...t,{role:"assistant",content:"\uD83D\uDEAB You’ve hit your monthly limit. Upgrade your plan to unlock more prompts, or wait until ".concat(e,".")}]),d("");return}m(e=>[...e,{role:"user",content:a},{role:"assistant",content:""}]),h(!0);try{var s;let e=null==(s=(await fetch("".concat(O.J,"/api/ai"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)},body:JSON.stringify({message:a})})).body)?void 0:s.getReader();if(!e)throw Error("No response body");let t=new TextDecoder,n="",r=!1;for(;!r;){let{value:a,done:s}=await e.read();if(r=s,a)for(let e of t.decode(a,{stream:!0}).split("\n\n")){let t=e.trim();if(t.startsWith("data:")){let e=t.replace(/^data:\s*/,"");if("[DONE]"===e)continue;try{let t=JSON.parse(e);"partial"===t.type&&(n+=t.content,m(e=>e.map((t,a)=>a===e.length-1?{...t,content:n}:t))),"complete"===t.type&&p(t.followUps||[])}catch(e){}}}}g(e=>e+1)}catch(e){m(t=>[...t,{role:"assistant",content:"❌ ".concat(e.message)}])}finally{h(!1),d("")}}},S=async e=>{var t;await fetch("".concat(O.J,"/api/saved"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)},credentials:"include",body:JSON.stringify({content:(null==(t=u.slice(-1)[0])?void 0:t.content)||"",title:e})}),v(!1)},z=async()=>{var t;await fetch("".concat(O.J,"/api/collab"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)},credentials:"include",body:JSON.stringify({content:(null==(t=u.slice(-1)[0])?void 0:t.content)||""})}),e.push("/collab-zone")};return t?(0,s.jsxs)("div",{className:"space-y-6 px-4 md:px-8 lg:px-12 pb-10 bg-gray-800 text-white min-h-screen",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold",children:["Welcome, ",t.subscriptionType?"".concat(t.subscriptionType," Plan"):t.email]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(i,{used:b,limit:t.promptLimit}),(0,s.jsxs)(l(),{href:"/refer",className:"flex items-center gap-2 bg-blue-100 border border-border px-4 py-3 rounded-xl shadow-sm hover:bg-blue-200 text-black transition",children:[(0,s.jsx)(E.A,{size:18,className:"text-accent"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Refer a Friend"})]}),(0,s.jsx)(l(),{href:"/settings",children:(0,s.jsx)(A.A,{className:"hover:text-accent transition w-7 h-7"})})]})]}),(0,s.jsxs)("div",{className:"bg-zinc-900 rounded-2xl p-4 space-y-4 shadow-sm border border-border",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c,{size:24}),(0,s.jsx)("h2",{className:"text-base font-medium",children:"Your AI Sidekick"})]}),(0,s.jsx)("div",{ref:w,className:"max-h-[60vh] overflow-y-auto space-y-4 p-4 rounded-xl text-sm leading-relaxed whitespace-pre-wrap animate-fade-in",children:u.slice(-10).map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("assistant"===e.role?"justify-start":"justify-end"),children:(0,s.jsx)("div",{className:"p-3 rounded-xl max-w-[80%] ".concat("assistant"===e.role?"bg-zinc-700 text-white":"bg-blue-500 text-white"),children:e.content})},t))}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-1 text-xs px-3 py-1 rounded-full bg-blue-400 text-black hover:bg-blue-500 transition",children:[(0,s.jsx)(D.A,{size:14})," Save"]}),(0,s.jsxs)("button",{onClick:z,className:"flex items-center gap-1 text-xs px-3 py-1 rounded-full bg-white text-black hover:bg-gray-200 transition",children:[(0,s.jsx)(T.A,{size:14})," Share to Collab Zone"]})]}),f.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:f.map((e,t)=>(0,s.jsx)("button",{onClick:()=>k(e),className:"text-xs bg-blue-100 text-blue-700 border border-blue-200 px-3 py-1 rounded-full hover:bg-blue-200 transition",children:e},t))}),(0,s.jsxs)("div",{className:"flex space-x-2 items-center bg-zinc-800 p-2 rounded-lg",children:[(0,s.jsx)("input",{type:"text",placeholder:"What would you like help with today?",className:"flex-1 border border-border rounded px-4 py-2 bg-zinc-900 text-white text-sm focus:outline-accent",value:o,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k(o))},disabled:x}),(0,s.jsx)("button",{onClick:()=>k(o),disabled:x,className:"flex items-center justify-center bg-blue-400 text-black px-4 py-2 text-sm rounded hover:bg-blue-500 transition w-16",children:x?(0,s.jsx)(J.A,{className:"animate-spin w-5 h-5"}):"Send"})]})]}),(0,s.jsx)(C,{open:y,onClose:()=>v(!1),onConfirm:S})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-screen text-textSecondary",children:"Loading…"})}},9168:(e,t,a)=>{Promise.resolve().then(a.bind(a,441))},9514:(e,t,a)=>{"use strict";a.d(t,{J:()=>s});let s="https://glowfly-api-production.up.railway.app"}},e=>{var t=t=>e(e.s=t);e.O(0,[852,582,548,784,358],()=>t(9168)),_N_E=e.O()}]);