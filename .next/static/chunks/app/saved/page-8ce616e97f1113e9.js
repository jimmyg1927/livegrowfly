(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{2569:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),n=a(5695);function o(){let[e,t]=(0,r.useState)([]),[a,o]=(0,r.useState)(!0),[d,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),m=(0,n.useRouter)(),p=localStorage.getItem("growfly_jwt");(0,r.useEffect)(()=>{if(!p)return void m.push("/login");fetch("/api/saved",{headers:{Authorization:"Bearer ".concat(p)}}).then(e=>e.json()).then(e=>t(e)).catch(()=>alert("Failed to load saved responses")).finally(()=>o(!1))},[p]);let x=async e=>{(await fetch("/api/saved/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(p)}})).ok?t(t=>t.filter(t=>t.id!==e)):alert("Failed to delete")},f=async e=>{(await fetch("/api/saved/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(p)},body:JSON.stringify({title:i})})).ok?(t(t=>t.map(t=>t.id===e?{...t,title:i}:t)),l(null)):alert("Failed to rename")},g=e.filter(e=>e.title.toLowerCase().includes(u.toLowerCase()));return(0,s.jsxs)("div",{className:"p-6 space-y-6 bg-background text-textPrimary",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCC1 Saved Responses"}),(0,s.jsx)("input",{type:"text",placeholder:"Search saved titles…",value:u,onChange:e=>h(e.target.value),className:"w-full max-w-md px-4 py-2 border rounded bg-card border-muted"}),a?(0,s.jsx)("p",{children:"Loading saved responses…"}):0===g.length?(0,s.jsx)("p",{className:"text-muted-foreground",children:"No saved responses found."}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(e=>(0,s.jsxs)("div",{className:"bg-card border border-muted rounded-xl p-4 shadow-sm flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[d===e.id?(0,s.jsx)("input",{className:"mb-2 w-full px-3 py-1 rounded border border-muted",value:i,onChange:e=>c(e.target.value),onBlur:()=>f(e.id),autoFocus:!0}):(0,s.jsx)("h2",{className:"text-lg font-semibold cursor-pointer hover:underline",onClick:()=>{l(e.id),c(e.title)},children:e.title}),(0,s.jsxs)("p",{className:"mt-2 text-sm whitespace-pre-wrap text-muted-foreground",children:[e.content.slice(0,200),"…"]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{l(e.id),c(e.title)},className:"text-sm px-3 py-1 rounded bg-accent text-white hover:bg-accent/80 transition",children:"Rename"}),(0,s.jsx)("button",{onClick:()=>x(e.id),className:"text-sm px-3 py-1 rounded bg-red-600 text-white hover:bg-red-700 transition",children:"Delete"})]})]},e.id))})]})}},4697:(e,t,a)=>{Promise.resolve().then(a.bind(a,2569))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4697)),_N_E=e.O()}]);