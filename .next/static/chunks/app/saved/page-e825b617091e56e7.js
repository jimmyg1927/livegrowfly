(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{4813:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(7907),r=s(9107),o=s(4377),n=s(5698),d=s(9505);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),f=(0,o.useRouter)(),x=localStorage.getItem("growfly_jwt");(0,r.useEffect)(()=>{if(!x)return void f.push("/login");fetch("/api/saved",{headers:{Authorization:"Bearer ".concat(x)}}).then(e=>{if(!e.ok)throw Error("Not authenticated");return e.json()}).then(e=>t(e)).catch(()=>alert("Failed to load saved responses")).finally(()=>l(!1))},[x,f]);let g=async e=>{x&&window.confirm("Are you sure you want to delete this saved item?")&&((await fetch("/api/saved/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(x)}})).ok?t(t=>t.filter(t=>t.id!==e)):alert("Failed to delete"))},b=async e=>{x&&((await fetch("/api/saved/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(x)},body:JSON.stringify({title:u})})).ok?(t(t=>t.map(t=>t.id===e?{...t,title:u}:t)),c(null)):alert("Failed to rename"))},v=e.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())),j=v.reduce((e,t)=>{let s=(0,d.GP)(new Date(t.createdAt),"PPP");return e[s]||(e[s]=[]),e[s].push(t),e},{});return(0,a.jsxs)("div",{className:"p-6 space-y-6 bg-background text-textPrimary",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83D\uDCC1 Saved Responses"}),(0,a.jsx)("input",{type:"text",placeholder:"Search saved titles…",value:m,onChange:e=>p(e.target.value),className:"w-full max-w-md px-4 py-2 border rounded bg-card border-muted focus:outline-none focus:ring-2 focus:ring-accent"}),s?(0,a.jsx)("p",{children:"Loading saved responses…"}):0===v.length?(0,a.jsx)("p",{className:"text-muted-foreground",children:"No saved responses found."}):Object.entries(j).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-muted-foreground",children:t}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-card border border-muted rounded-xl p-4 shadow-sm flex flex-col justify-between",children:[(0,a.jsxs)("div",{children:[i===e.id?(0,a.jsx)("input",{className:"mb-2 w-full px-3 py-1 rounded border border-muted bg-background focus:outline-none focus:ring-2 focus:ring-accent",value:u,onChange:e=>h(e.target.value),onBlur:()=>b(e.id),autoFocus:!0}):(0,a.jsx)("h3",{className:"text-lg font-semibold cursor-pointer hover:underline",onClick:()=>{c(e.id),h(e.title)},children:e.title}),(0,a.jsxs)("p",{className:"mt-2 text-sm whitespace-pre-wrap text-muted-foreground",children:[e.content.slice(0,200),"…"]})]}),(0,a.jsx)("div",{className:"mt-4 flex justify-end gap-2",children:(0,a.jsxs)("button",{onClick:()=>g(e.id),className:"flex items-center gap-1 text-sm px-3 py-1 rounded bg-red-600 hover:bg-red-700 text-white transition",children:[(0,a.jsx)(n.IXo,{})," Delete"]})})]},e.id))})]},t)})]})}},9049:(e,t,s)=>{Promise.resolve().then(s.bind(s,4813))}},e=>{var t=t=>e(e.s=t);e.O(0,[305,766,548,784,358],()=>t(9049)),_N_E=e.O()}]);